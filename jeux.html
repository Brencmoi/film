<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail de Jeux</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Icônes Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        :root {
            --background-color: #0c0a18;
            --text-primary: #f0f0f0;
            --primary-accent: #00ffc3;
            --secondary-accent: #ff00c1;
            --card-bg: rgba(0, 255, 195, 0.05);
            --card-border: rgba(0, 255, 195, 0.2);
            --font-pixel: 'Press Start 2P', cursive;
            --font-sans: 'Inter', sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-primary);
            font-family: var(--font-sans);
            overflow-x: hidden;
        }
        
        /* --- Conteneurs principaux --- */
        .game-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            animation: fadeIn 0.5s ease-in-out;
        }

        .game-container {
            display: none; /* Caché par défaut */
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- Écran de sélection des jeux --- */
        #game-selection-screen h1 {
            font-family: var(--font-pixel);
            color: var(--primary-accent);
            text-shadow: 0 0 10px var(--primary-accent), 0 0 20px var(--secondary-accent);
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: 3rem;
        }

        .game-card {
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            border-radius: 1rem;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(5px);
            height: 100%;
        }

        .game-card:hover {
            transform: scale(1.05);
            border-color: var(--primary-accent);
            box-shadow: 0 0 20px rgba(0, 255, 195, 0.3);
        }

        .game-card i {
            font-size: 4rem;
            color: var(--primary-accent);
            margin-bottom: 1rem;
        }

        .game-card h3 {
            font-family: var(--font-pixel);
            font-size: 1.2rem;
        }

        /* --- Boutons de navigation --- */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .back-button:hover {
            background-color: var(--primary-accent);
            color: var(--background-color);
        }

        /* --- Style des jeux --- */
        .game-title {
            font-family: var(--font-pixel);
            color: var(--primary-accent);
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .game-btn {
            font-family: var(--font-pixel);
            font-size: 0.8rem;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            border: 2px solid var(--primary-accent);
            background: transparent;
            color: var(--primary-accent);
            transition: all 0.3s ease;
        }
        .game-btn:hover {
            background: var(--primary-accent);
            color: var(--background-color);
            box-shadow: 0 0 15px var(--primary-accent);
        }

        /* --- JEU 1: 2048 --- */
        #game-2048 { width: 100%; max-width: 500px; text-align: center; }
        .score-container { font-size: 1.5rem; margin-bottom: 1rem; }
        #grid-2048 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 10px;
            background-color: #333;
            border-radius: 10px;
            touch-action: none; /* Pour les gestes tactiles */
        }
        .tile-2048 {
            height: 100px;
            width: 100%;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            background-color: #444;
            color: #fff;
            transition: all 0.3s ease;
        }
        /* Couleurs des tuiles pour 2048 */
        [data-value="2"] { background-color: #7dd3fc; color: #000; }
        [data-value="4"] { background-color: #67e8f9; color: #000; }
        [data-value="8"] { background-color: #5eead4; color: #000; }
        [data-value="16"] { background-color: #6ee7b7; color: #000; }
        [data-value="32"] { background-color: #a3e635; color: #000; }
        [data-value="64"] { background-color: #fde047; color: #000; }
        [data-value="128"] { background-color: #fb923c; }
        [data-value="256"] { background-color: #f87171; }
        [data-value="512"] { background-color: #f472b6; }
        [data-value="1024"] { background-color: #e879f9; }
        [data-value="2048"] { background-color: #c084fc; }
        
        /* --- JEU 2: BLACKJACK --- */
        #game-blackjack { max-width: 600px; width: 100%; }
        .blackjack-table { background: #087f5b; border-radius: 1rem; padding: 2rem; border: 5px solid #064e3b; text-align: center;}
        .hand { min-height: 100px; display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 1rem;}
        .card {
            width: 60px;
            height: 90px;
            border-radius: 5px;
            background: white;
            color: black;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            font-size: 1.5rem;
            font-weight: bold;
            border: 1px solid #ccc;
        }
        .card.red { color: red; }
        #message-area { font-size: 1.2rem; min-height: 30px; font-weight: bold; }
        
        /* --- JEU 3: MORPION (TIC-TAC-TOE) --- */
        #game-tictactoe { max-width: 400px; text-align: center;}
        #board-tictactoe { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 1rem;}
        .cell-tictactoe {
            width: 100px;
            height: 100px;
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-family: var(--font-pixel);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .cell-tictactoe:hover { border-color: var(--primary-accent); }
        .cell-tictactoe.X { color: var(--primary-accent); }
        .cell-tictactoe.O { color: var(--secondary-accent); }

        /* --- JEU 4: SNAKE --- */
        #game-snake { text-align: center; }
        #canvas-snake {
            background-color: #111;
            border: 2px solid var(--primary-accent);
            box-shadow: 0 0 15px var(--primary-accent);
        }

        /* --- JEU 5: MEMORY --- */
        #game-memory { max-width: 600px; text-align: center;}
        #grid-memory {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        .card-memory {
            aspect-ratio: 1 / 1;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }
        .card-memory.flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }
        .card-back {
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            font-size: 3rem;
            color: var(--primary-accent);
        }
        .card-front {
            background: var(--primary-accent);
            transform: rotateY(180deg);
            font-size: 3rem;
            color: var(--background-color);
        }
    </style>
</head>
<body>

    <!-- Bouton de retour au blog -->
    <a href="index.html" class="back-button" title="Retour au blog">
        <i class="bi bi-house-door-fill"></i>
    </a>
    
    <!-- Bouton pour revenir au menu des jeux (visible seulement dans un jeu) -->
    <button id="back-to-menu-btn" class="back-button" title="Retour au menu" style="display: none; left: 75px;">
        <i class="bi bi-list"></i>
    </button>

    <!-- SECTION 1: Écran de sélection des jeux -->
    <div id="game-selection-screen" class="game-section">
        <div class="container text-center">
            <h1>ARCADE</h1>
            <div class="row g-4 justify-content-center">
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="game-card" data-game="tictactoe">
                        <i class="bi bi-hash"></i>
                        <h3>Morpion</h3>
                        <p class="text-white-50 d-none d-md-block">Joueur vs Robot.</p>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="game-card" data-game="2048">
                        <i class="bi bi-grid-1x2-fill"></i>
                        <h3>2048</h3>
                        <p class="text-white-50 d-none d-md-block">Additionnez les tuiles.</p>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-3">
                    <div class="game-card" data-game="blackjack">
                        <i class="bi bi-suit-spade-fill"></i>
                        <h3>Blackjack</h3>
                        <p class="text-white-50 d-none d-md-block">Visez 21 !</p>
                    </div>
                </div>
                 <div class="col-6 col-md-4 col-lg-3">
                    <div class="game-card" data-game="snake">
                        <i class="bi bi-bug-fill"></i>
                        <h3>Snake</h3>
                        <p class="text-white-50 d-none d-md-block">Le serpent affamé.</p>
                    </div>
                </div>
                 <div class="col-6 col-md-4 col-lg-3">
                    <div class="game-card" data-game="memory">
                        <i class="bi bi-question-diamond-fill"></i>
                        <h3>Memory</h3>
                        <p class="text-white-50 d-none d-md-block">Trouvez les paires.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- SECTION 2: Conteneurs pour chaque jeu -->
    <!-- Conteneur pour le morpion -->
    <div id="game-tictactoe-container" class="game-container game-section">
        <div id="game-tictactoe">
            <h2 class="game-title">Morpion</h2>
            <div id="tictactoe-mode-selection" class="mb-4">
                <button class="game-btn mx-2" data-mode="pvc">vs Robot</button>
                <button class="game-btn mx-2" data-mode="pvp">vs Joueur</button>
            </div>
            <div id="board-tictactoe" style="display: none;"></div>
            <p id="status-tictactoe" class="my-3 fs-5"></p>
            <button id="restart-tictactoe" class="game-btn" style="display: none;">Rejouer</button>
        </div>
    </div>

    <!-- Conteneur pour 2048 -->
    <div id="game-2048-container" class="game-container game-section">
        <div id="game-2048">
            <h2 class="game-title">2048</h2>
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="score-container">Score: <span id="score-2048">0</span></div>
                <button id="restart-2048" class="game-btn">Rejouer</button>
            </div>
            <div id="grid-2048"></div>
             <p class="text-white-50 mt-3">Utilisez les flèches ou glissez sur l'écran.</p>
        </div>
    </div>

    <!-- Conteneur pour le Blackjack -->
    <div id="game-blackjack-container" class="game-container game-section">
        <div id="game-blackjack">
            <h2 class="game-title">Blackjack</h2>
            <div class="blackjack-table">
                <h4>Croupier (<span id="dealer-score">0</span>)</h4>
                <div id="dealer-hand" class="hand"></div>
                <h4>Joueur (<span id="player-score">0</span>)</h4>
                <div id="player-hand" class="hand"></div>
                <p id="message-area">&nbsp;</p>
                <div id="action-buttons" class="mt-3">
                    <button id="hit-btn" class="game-btn mx-1">Carte</button>
                    <button id="stand-btn" class="game-btn mx-1">Rester</button>
                </div>
                <button id="new-game-btn" class="game-btn mt-3" style="display: none;">Nouvelle Partie</button>
            </div>
        </div>
    </div>
    
    <!-- Conteneur pour Snake -->
    <div id="game-snake-container" class="game-container game-section">
        <div id="game-snake">
            <h2 class="game-title">Snake</h2>
            <div class="score-container mb-3">Score: <span id="score-snake">0</span></div>
            <canvas id="canvas-snake" width="400" height="400"></canvas>
            <p class="text-white-50 mt-3">Utilisez les flèches pour vous déplacer.</p>
        </div>
    </div>
    
    <!-- Conteneur pour Memory -->
    <div id="game-memory-container" class="game-container game-section">
        <div id="game-memory">
             <h2 class="game-title">Memory</h2>
             <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="score-container">Paires: <span id="pairs-memory">0</span> / 8</div>
                <button id="restart-memory" class="game-btn">Rejouer</button>
            </div>
             <div id="grid-memory"></div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const gameSelectionScreen = document.getElementById('game-selection-screen');
            const backToMenuBtn = document.getElementById('back-to-menu-btn');
            const gameCards = document.querySelectorAll('.game-card');
            const gameContainers = document.querySelectorAll('.game-container');

            // --- NAVIGATION PRINCIPALE ---
            gameCards.forEach(card => card.addEventListener('click', () => showGame(card.dataset.game)));
            backToMenuBtn.addEventListener('click', showMenu);

            function showGame(gameId) {
                gameSelectionScreen.style.display = 'none';
                backToMenuBtn.style.display = 'flex';
                gameContainers.forEach(container => container.style.display = 'none');
                
                const activeContainer = document.getElementById(`game-${gameId}-container`);
                activeContainer.style.display = 'flex';
                
                if (gameId === 'tictactoe') initTicTacToe();
                if (gameId === '2048') init2048();
                if (gameId === 'blackjack') initBlackjack();
                if (gameId === 'snake') initSnake();
                if (gameId === 'memory') initMemory();
            }

            function showMenu() {
                if(snakeInterval) clearInterval(snakeInterval); // Arrête le jeu Snake si on quitte
                gameSelectionScreen.style.display = 'flex';
                backToMenuBtn.style.display = 'none';
                gameContainers.forEach(container => container.style.display = 'none');
            }

            // --- JEU 1: MORPION (TIC-TAC-TOE) avec IA ---
            const boardTicTacToeEl = document.getElementById('board-tictactoe');
            const statusTicTacToeEl = document.getElementById('status-tictactoe');
            const restartBtnTicTacToeEl = document.getElementById('restart-tictactoe');
            const modeSelectionEl = document.getElementById('tictactoe-mode-selection');
            let cellsTicTacToe = [], currentPlayer, gameActive, boardState, gameMode;
            const winningConditions = [ [0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6] ];

            function initTicTacToe() {
                modeSelectionEl.style.display = 'block';
                boardTicTacToeEl.style.display = 'none';
                restartBtnTicTacToeEl.style.display = 'none';
                statusTicTacToeEl.textContent = 'Choisissez un mode de jeu';
            }

            modeSelectionEl.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => {
                gameMode = btn.dataset.mode;
                startTicTacToe();
            }));

            function startTicTacToe() {
                modeSelectionEl.style.display = 'none';
                boardTicTacToeEl.style.display = 'grid';
                restartBtnTicTacToeEl.style.display = 'inline-block';
                boardTicTacToeEl.innerHTML = '';
                cellsTicTacToe = [];
                boardState = ["", "", "", "", "", "", "", "", ""];
                currentPlayer = 'X';
                gameActive = true;
                statusTicTacToeEl.textContent = `Au tour de X`;
                for (let i = 0; i < 9; i++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell-tictactoe');
                    cell.dataset.index = i;
                    cell.addEventListener('click', handleCellClick);
                    boardTicTacToeEl.appendChild(cell);
                    cellsTicTacToe.push(cell);
                }
            }
            
            function handleCellClick(e) {
                const clickedCell = e.target;
                const clickedCellIndex = parseInt(clickedCell.dataset.index);
                if (boardState[clickedCellIndex] !== "" || !gameActive) return;
                
                placeMark(clickedCellIndex, currentPlayer);
                if (gameActive && gameMode === 'pvc') {
                    setTimeout(robotMove, 500);
                }
            }

            function placeMark(index, player) {
                boardState[index] = player;
                cellsTicTacToe[index].textContent = player;
                cellsTicTacToe[index].classList.add(player);
                checkResult();
            }

            function robotMove() {
                if (!gameActive) return;
                // Logique de l'IA: 1. Gagner, 2. Bloquer, 3. Stratégie, 4. Aléatoire
                let move = -1;
                // 1. Cherche un coup gagnant
                for(let i = 0; i < 9; i++) {
                    if(boardState[i] === "") {
                        boardState[i] = 'O';
                        if(checkWin('O')) move = i;
                        boardState[i] = "";
                    }
                }
                // 2. Cherche à bloquer le joueur
                if (move === -1) {
                    for(let i = 0; i < 9; i++) {
                        if(boardState[i] === "") {
                            boardState[i] = 'X';
                            if(checkWin('X')) move = i;
                            boardState[i] = "";
                        }
                    }
                }
                // 3. Prend le centre si libre
                if (move === -1 && boardState[4] === "") move = 4;
                // 4. Prend un coin si libre
                if (move === -1) {
                    const corners = [0, 2, 6, 8];
                    const availableCorners = corners.filter(i => boardState[i] === "");
                    if (availableCorners.length > 0) move = availableCorners[Math.floor(Math.random() * availableCorners.length)];
                }
                // 5. Prend n'importe quelle case libre
                if (move === -1) {
                    const available = boardState.map((val, idx) => val === "" ? idx : null).filter(val => val !== null);
                    if (available.length > 0) move = available[Math.floor(Math.random() * available.length)];
                }
                if(move !== -1) placeMark(move, currentPlayer);
            }

            function checkResult() {
                if (checkWin(currentPlayer)) {
                    statusTicTacToeEl.textContent = `${currentPlayer} a gagné !`;
                    gameActive = false;
                } else if (!boardState.includes("")) {
                    statusTicTacToeEl.textContent = `Égalité !`;
                    gameActive = false;
                } else {
                    currentPlayer = currentPlayer === "X" ? "O" : "X";
                    statusTicTacToeEl.textContent = `Au tour de ${currentPlayer}`;
                }
            }

            function checkWin(player) {
                return winningConditions.some(condition => {
                    return condition.every(index => boardState[index] === player);
                });
            }
            
            restartBtnTicTacToeEl.addEventListener('click', initTicTacToe);

            // --- JEU 2: 2048 (Code inchangé) ---
            const grid2048 = document.getElementById('grid-2048');
            const score2048 = document.getElementById('score-2048');
            const restartBtn2048 = document.getElementById('restart-2048');
            let grid = []; let score = 0;
            function init2048() { grid = Array.from({ length: 4 }, () => Array(4).fill(0)); score = 0; updateScore(); addRandomTile(); addRandomTile(); drawGrid(); }
            function drawGrid() { grid2048.innerHTML = ''; for (let r = 0; r < 4; r++) for (let c = 0; c < 4; c++) { const tile = document.createElement('div'); tile.classList.add('tile-2048'); const value = grid[r][c]; if (value > 0) { tile.textContent = value; tile.dataset.value = value; } grid2048.appendChild(tile); } }
            function addRandomTile() { let empty = []; for (let r=0;r<4;r++) for (let c=0;c<4;c++) if (grid[r][c]===0) empty.push({r,c}); if (empty.length > 0) { const {r,c} = empty[Math.floor(Math.random()*empty.length)]; grid[r][c] = Math.random() < 0.9 ? 2:4; } }
            function move(dir) { let moved=false; if (dir==='up'||dir==='down') grid=transpose(grid); if (dir==='right'||dir==='down') grid=grid.map(row=>row.reverse()); for (let r=0;r<4;r++) { let newRow=grid[r].filter(v=>v); for(let i=0;i<newRow.length-1;i++) if(newRow[i]===newRow[i+1]){newRow[i]*=2;score+=newRow[i];newRow.splice(i+1,1);} while(newRow.length<4)newRow.push(0); if(grid[r].join(',')!==newRow.join(','))moved=true; grid[r]=newRow; } if (dir==='right'||dir==='down') grid=grid.map(row=>row.reverse()); if (dir==='up'||dir==='down') grid=transpose(grid); if (moved) { addRandomTile(); drawGrid(); updateScore(); if(isGameOver()) alert('Game Over!'); } }
            function transpose(m) { return m[0].map((_,ci)=>m.map(r=>r[ci]));}
            function updateScore() { score2048.textContent = score; }
            function isGameOver() { for(let r=0;r<4;r++) for(let c=0;c<4;c++) {if(grid[r][c]===0)return false; if(r<3&&grid[r][c]===grid[r+1][c])return false; if(c<3&&grid[r][c]===grid[r][c+1])return false;} return true;}
            document.addEventListener('keydown', e => { if(document.getElementById('game-2048-container').style.display !== 'flex') return; if (e.key==='ArrowUp')move('up'); else if(e.key==='ArrowDown')move('down'); else if(e.key==='ArrowLeft')move('left'); else if(e.key==='ArrowRight')move('right');});
            let touchStartX=0,touchStartY=0; grid2048.addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].screenX;touchStartY=e.changedTouches[0].screenY;}); grid2048.addEventListener('touchend',e=>{let touchEndX=e.changedTouches[0].screenX;let touchEndY=e.changedTouches[0].screenY; const dx=touchEndX-touchStartX;const dy=touchEndY-touchStartY; if(Math.abs(dx)>Math.abs(dy)){if(dx>0)move('right');else move('left');}else{if(dy>0)move('down');else move('up');}});
            restartBtn2048.addEventListener('click', init2048);

            // --- JEU 3: BLACKJACK (Code inchangé) ---
            const dealerHandEl=document.getElementById('dealer-hand'),playerHandEl=document.getElementById('player-hand'),dealerScoreEl=document.getElementById('dealer-score'),playerScoreEl=document.getElementById('player-score'),messageArea=document.getElementById('message-area'),actionButtons=document.getElementById('action-buttons'),newGameBtn=document.getElementById('new-game-btn'),hitBtn=document.getElementById('hit-btn'),standBtn=document.getElementById('stand-btn');
            let deck=[],playerHand=[],dealerHand=[];
            function initBlackjack(){startNewGame();newGameBtn.addEventListener('click',startNewGame);hitBtn.addEventListener('click',hit);standBtn.addEventListener('click',stand);}
            function startNewGame(){deck=createDeck();shuffle(deck);playerHand=[dealCard(),dealCard()];dealerHand=[dealCard(),dealCard()];actionButtons.style.display='block';newGameBtn.style.display='none';messageArea.textContent='';renderHands(true);updateScores();if(getHandValue(playerHand)===21){messageArea.textContent="Blackjack ! Vous gagnez !";endGame();}}
            function createDeck(){const s=['♥','♦','♣','♠'],v=['A','2','3','4','5','6','7','8','9','10','J','Q','K'];let d=[];for(let suit of s)for(let val of v)d.push({suit,value:val});return d;}
            function shuffle(d){for(let i=d.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[d[i],d[j]]=[d[j],d[i]];}}
            function dealCard(){return deck.pop();}
            function renderHands(hide=false){playerHandEl.innerHTML=playerHand.map(createCardHTML).join('');dealerHandEl.innerHTML='';dealerHandEl.innerHTML+=createCardHTML(dealerHand[0]);if(hide){const h=document.createElement('div');h.className='card';h.style.backgroundColor='#555';dealerHandEl.appendChild(h);}else{dealerHandEl.innerHTML+=createCardHTML(dealerHand[1]);}}
            function createCardHTML(c){const r=c.suit==='♥'||c.suit==='♦'?' red':'';return `<div class="card${r}"><span>${c.value}</span><span>${c.suit}</span></div>`;}
            function getHandValue(h){let val=0,aces=0;for(let c of h){if(c.value==='A'){aces++;val+=11;}else if(['J','Q','K'].includes(c.value))val+=10;else val+=parseInt(c.value);}while(val>21&&aces>0){val-=10;aces--;}return val;}
            function updateScores(){playerScoreEl.textContent=getHandValue(playerHand);dealerScoreEl.textContent=getHandValue([dealerHand[0]]);}
            function hit(){playerHand.push(dealCard());renderHands(true);updateScores();if(getHandValue(playerHand)>21){messageArea.textContent="Bust ! Vous avez perdu.";endGame();}}
            function stand(){renderHands(false);dealerScoreEl.textContent=getHandValue(dealerHand);let ds=getHandValue(dealerHand);while(ds<17){dealerHand.push(dealCard());ds=getHandValue(dealerHand);dealerHandEl.innerHTML+=createCardHTML(dealerHand[dealerHand.length-1]);dealerScoreEl.textContent=ds;}if(ds>21)messageArea.textContent="Le croupier bust ! Vous gagnez !";else if(ds>getHandValue(playerHand))messageArea.textContent="Le croupier gagne.";else if(ds<getHandValue(playerHand))messageArea.textContent="Vous gagnez !";else messageArea.textContent="Égalité.";endGame();}
            function endGame(){actionButtons.style.display='none';newGameBtn.style.display='block';}

            // --- NOUVEAU JEU 4: SNAKE ---
            const canvasSnake = document.getElementById('canvas-snake');
            const ctxSnake = canvasSnake.getContext('2d');
            const scoreSnakeEl = document.getElementById('score-snake');
            const gridSize = 20;
            let snake, food, scoreSnake, direction, snakeInterval;

            function initSnake() {
                if(snakeInterval) clearInterval(snakeInterval);
                snake = [{ x: 10, y: 10 }];
                placeFood();
                scoreSnake = 0;
                scoreSnakeEl.textContent = 0;
                direction = 'right';
                snakeInterval = setInterval(gameLoopSnake, 150);
            }
            
            function gameLoopSnake() {
                moveSnake();
                if (checkCollision()) {
                    clearInterval(snakeInterval);
                    alert(`Game Over! Score: ${scoreSnake}`);
                    initSnake(); // Restart
                    return;
                }
                if (snake[0].x === food.x && snake[0].y === food.y) {
                    scoreSnake++;
                    scoreSnakeEl.textContent = scoreSnake;
                    placeFood();
                } else {
                    snake.pop();
                }
                drawSnake();
            }

            function drawSnake() {
                ctxSnake.fillStyle = '#0c0a18';
                ctxSnake.fillRect(0, 0, canvasSnake.width, canvasSnake.height);
                ctxSnake.fillStyle = 'lime';
                snake.forEach(segment => ctxSnake.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2));
                ctxSnake.fillStyle = 'red';
                ctxSnake.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
            }

            function moveSnake() {
                const head = { ...snake[0] };
                if (direction === 'up') head.y--;
                if (direction === 'down') head.y++;
                if (direction === 'left') head.x--;
                if (direction === 'right') head.x++;
                snake.unshift(head);
            }

            function placeFood() {
                food = {
                    x: Math.floor(Math.random() * (canvasSnake.width / gridSize)),
                    y: Math.floor(Math.random() * (canvasSnake.height / gridSize))
                };
            }

            function checkCollision() {
                const head = snake[0];
                if (head.x < 0 || head.x >= canvasSnake.width / gridSize || head.y < 0 || head.y >= canvasSnake.height / gridSize) return true;
                for (let i = 1; i < snake.length; i++) if (head.x === snake[i].x && head.y === snake[i].y) return true;
                return false;
            }

            document.addEventListener('keydown', e => {
                 if(document.getElementById('game-snake-container').style.display !== 'flex') return;
                const key = e.key;
                if (key === 'ArrowUp' && direction !== 'down') direction = 'up';
                if (key === 'ArrowDown' && direction !== 'up') direction = 'down';
                if (key === 'ArrowLeft' && direction !== 'right') direction = 'left';
                if (key === 'ArrowRight' && direction !== 'left') direction = 'right';
            });
            
            // --- NOUVEAU JEU 5: MEMORY ---
            const gridMemoryEl = document.getElementById('grid-memory');
            const pairsMemoryEl = document.getElementById('pairs-memory');
            const restartMemoryBtn = document.getElementById('restart-memory');
            const icons = ['bi-apple', 'bi-bell-fill', 'bi-camera-reels-fill', 'bi-cloud-sun-fill', 'bi-emoji-sunglasses-fill', 'bi-geo-alt-fill', 'bi-git', 'bi-heart-fill'];
            let cards = [], flippedCards = [], matchedPairs = 0, lockBoard = false;

            function initMemory() {
                matchedPairs = 0;
                pairsMemoryEl.textContent = 0;
                cards = [...icons, ...icons];
                shuffle(cards);
                gridMemoryEl.innerHTML = '';
                cards.forEach(icon => {
                    const cardEl = document.createElement('div');
                    cardEl.classList.add('card-memory');
                    cardEl.dataset.icon = icon;
                    cardEl.innerHTML = `
                        <div class="card-face card-back"><i class="bi bi-question-lg"></i></div>
                        <div class="card-face card-front"><i class="bi ${icon}"></i></div>
                    `;
                    cardEl.addEventListener('click', handleCardClick);
                    gridMemoryEl.appendChild(cardEl);
                });
            }

            function handleCardClick(e) {
                const clickedCard = e.currentTarget;
                if (lockBoard || clickedCard.classList.contains('flipped') || flippedCards.length === 2) return;
                
                clickedCard.classList.add('flipped');
                flippedCards.push(clickedCard);

                if (flippedCards.length === 2) {
                    checkForMatch();
                }
            }

            function checkForMatch() {
                lockBoard = true;
                const [card1, card2] = flippedCards;
                if (card1.dataset.icon === card2.dataset.icon) {
                    card1.removeEventListener('click', handleCardClick);
                    card2.removeEventListener('click', handleCardClick);
                    matchedPairs++;
                    pairsMemoryEl.textContent = matchedPairs;
                    flippedCards = [];
                    lockBoard = false;
                    if (matchedPairs === icons.length) {
                        setTimeout(() => alert('Vous avez gagné !'), 500);
                    }
                } else {
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                        flippedCards = [];
                        lockBoard = false;
                    }, 1000);
                }
            }

            restartMemoryBtn.addEventListener('click', initMemory);

        });
    </script>

</body>
</html>

